"use babel";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = {
  config: {
    execPath: {
      title: "GCC Executable Path",
      description: "Note for Windows/Mac OSX users: please ensure that GCC is in your ```$PATH``` otherwise the linter might not work. If your path contains spaces, it needs to be enclosed in double quotes.",
      type: "string",
      "default": "/usr/bin/g++"
    },
    gccIncludePaths: {
      title: "GCC Include Paths",
      description: "Enter your include paths as a comma-separated list. Paths starting with ```.``` or ```..``` are expanded relative to the project root/file path. If any of your paths contain spaces, they need to be enclosed in double quotes.",
      type: "string",
      "default": " "
    },
    gccSuppressWarnings: {
      title: "Suppress GCC Warnings",
      type: "boolean",
      "default": false
    },
    gccDefaultCFlags: {
      title: "C Flags",
      type: "string",
      "default": "-Wall"
    },
    gccDefaultCppFlags: {
      title: "C++ Flags",
      type: "string",
      "default": "-Wall -std=c++11"
    },
    gccErrorLimit: {
      title: "GCC Error Limit",
      type: "integer",
      "default": 0
    }
  },

  activate: function activate() {
    if (!atom.packages.getLoadedPackages("linter")) {
      atom.notifications.addError("Linter package not found.", {
        detail: "Please install the `linter` package in your Settings view."
      });
    }
    require("atom-package-deps").install("linter-gcc");
  },

  provideLinter: function provideLinter() {
    var helpers = require("atom-linter");
    var regex = "(?<file>.+):(?<line>\\d+):(?<col>\\d+):\\s*\\w*\\s*(?<type>(error|warning|note)):\\s*(?<message>.*)";

    // Read configuration data from JSON file .gcc-config.json
    // in project root
    return {
      name: "GCC",
      grammarScopes: ["source.c", "source.cpp"],
      scope: "file",
      lintOnFly: false,
      lint: function lint(activeEditor) {
        config = require("./config");
        var path = require('path');
        settings = config.settings();
        var file = activeEditor.getPath();
        var cwd = atom.project.getPaths()[0];
        if (!cwd) {
          editor = atom.workspace.getActivePaneItem();
          if (editor) {
            file = editor.buffer.file;
            if (file) {
              cwd = file.getParent().getPath();
            }
          }
        }
        command = settings.execPath;

        // Expand path if necessary
        if (command.substring(0, 1) == ".") {
          command = path.join(cwd, command);
        }

        args = [];
        args.push("-c");

        if (activeEditor.getGrammar().name === "C++") {
          s = settings.gccDefaultCppFlags;
          tempargs = s.split(" ");
          args = args.concat(tempargs);
        } else if (activeEditor.getGrammar().name === "C") {
          s = settings.gccDefaultCFlags;
          tempargs = s.split(" ");
          args = args.concat(tempargs);
        }

        args.push("-fmax-errors=" + settings.gccErrorLimit);
        if (settings.gccSuppressWarnings) {
          args.push("-w");
        }

        var s = settings.gccIncludePaths;
        s = s.trim();
        if (s.length != 0) {
          tempargs = s.split(",");
          tempargs.forEach(function (entry) {
            entry = entry.trim();
            if (entry.length != 0) {
              if (entry.substring(0, 1) == ".") {
                entry = path.join(cwd, entry);
              }
              item = "-I" + entry;
              args.push(item);
            }
          });
        }

        args.push(file);

        full_command = "linter-gcc: " + command;
        args.forEach(function (entry) {
          full_command = full_command + " " + entry;
        });

        console.log(full_command);
        return helpers.exec(command, args, { stream: "stderr" }).then(function (output) {
          messages = helpers.parse(output, regex);
          var searchString = "error";
          var error_pos = output.indexOf(searchString);
          if (messages.length == 0) {
            if (error_pos != -1) {
              messages.push({
                type: "error",
                text: output.substring(error_pos, output.length - 1)
              });
            }
          }
          return messages;
        });
      }
    };
  }
};
module.exports = exports["default"];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3ZpY3Rvci8uYXRvbS9wYWNrYWdlcy9saW50ZXItZ2NjL2xpYi9tYWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFdBQVcsQ0FBQzs7Ozs7cUJBRUc7QUFDYixRQUFNLEVBQUU7QUFDTixZQUFRLEVBQUU7QUFDUixXQUFLLEVBQUUscUJBQXFCO0FBQzVCLGlCQUFXLEVBQUUsNExBQTRMO0FBQ3pNLFVBQUksRUFBRSxRQUFRO0FBQ2QsaUJBQVMsY0FBYztLQUN4QjtBQUNELG1CQUFlLEVBQUU7QUFDZixXQUFLLEVBQUUsbUJBQW1CO0FBQzFCLGlCQUFXLEVBQUUsa09BQWtPO0FBQy9PLFVBQUksRUFBRSxRQUFRO0FBQ2QsaUJBQVMsR0FBRztLQUNiO0FBQ0QsdUJBQW1CLEVBQUU7QUFDbkIsV0FBSyxFQUFFLHVCQUF1QjtBQUM5QixVQUFJLEVBQUUsU0FBUztBQUNmLGlCQUFTLEtBQUs7S0FDZjtBQUNELG9CQUFnQixFQUFFO0FBQ2hCLFdBQUssRUFBRSxTQUFTO0FBQ2hCLFVBQUksRUFBRSxRQUFRO0FBQ2QsaUJBQVMsT0FBTztLQUNqQjtBQUNELHNCQUFrQixFQUFFO0FBQ2xCLFdBQUssRUFBRSxXQUFXO0FBQ2xCLFVBQUksRUFBRSxRQUFRO0FBQ2QsaUJBQVMsa0JBQWtCO0tBQzVCO0FBQ0QsaUJBQWEsRUFBRTtBQUNiLFdBQUssRUFBRSxpQkFBaUI7QUFDeEIsVUFBSSxFQUFFLFNBQVM7QUFDZixpQkFBUyxDQUFDO0tBQ1g7R0FDRjs7QUFFRCxVQUFRLEVBQUUsb0JBQU07QUFDZCxRQUFHLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxpQkFBaUIsQ0FBQyxRQUFRLENBQUMsRUFBRTtBQUM3QyxVQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FDekIsMkJBQTJCLEVBQzNCO0FBQ0UsY0FBTSxFQUFFLDREQUE0RDtPQUNyRSxDQUNGLENBQUM7S0FDSDtBQUNELFdBQU8sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxZ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Q0FBQyxTQUFTLENBQUMsU0FBUyxFQUFFLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO2VBQ3ZELENBQUMsQ0FBQzthQUNOO1dBQ0o7QUFDRCxpQkFBTyxRQUFRLENBQUM7U0FDbkIsQ0FDRixDQUFDO09BQ0g7S0FDRixDQUFDO0dBQ0g7Q0FDRiIsImZpbGUiOiIvaG9tZS92aWN0b3IvLmF0b20vcGFja2FnZXMvbGludGVyLWdjYy9saWIvbWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGJhYmVsXCI7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgY29uZmlnOiB7XG4gICAgZXhlY1BhdGg6IHtcbiAgICAgIHRpdGxlOiBcIkdDQyBFeGVjdXRhYmxlIFBhdGhcIixcbiAgICAgIGRlc2NyaXB0aW9uOiBcIk5vdGUgZm9yIFdpbmRvd3MvTWFjIE9TWCB1c2VyczogcGxlYXNlIGVuc3VyZSB0aGF0IEdDQyBpcyBpbiB5b3VyIGBgYCRQQVRIYGBgIG90aGVyd2lzZSB0aGUgbGludGVyIG1pZ2h0IG5vdCB3b3JrLiBJZiB5b3VyIHBhdGggY29udGFpbnMgc3BhY2VzLCBpdCBuZWVkcyB0byBiZSBlbmNsb3NlZCBpbiBkb3VibGUgcXVvdGVzLlwiLFxuICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgIGRlZmF1bHQ6IFwiL3Vzci9iaW4vZysrXCJcbiAgICB9LFxuICAgIGdjY0luY2x1ZGVQYXRoczoge1xuICAgICAgdGl0bGU6IFwiR0NDIEluY2x1ZGUgUGF0aHNcIixcbiAgICAgIGRlc2NyaXB0aW9uOiBcIkVudGVyIHlvdXIgaW5jbHVkZSBwYXRocyBhcyBhIGNvbW1hLXNlcGFyYXRlZCBsaXN0LiBQYXRocyBzdGFydGluZyB3aXRoIGBgYC5gYGAgb3IgYGBgLi5gYGAgYXJlIGV4cGFuZGVkIHJlbGF0aXZlIHRvIHRoZSBwcm9qZWN0IHJvb3QvZmlsZSBwYXRoLiBJZiBhbnkgb2YgeW91ciBwYXRocyBjb250YWluIHNwYWNlcywgdGhleSBuZWVkIHRvIGJlIGVuY2xvc2VkIGluIGRvdWJsZSBxdW90ZXMuXCIsXG4gICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgZGVmYXVsdDogXCIgXCJcbiAgICB9LFxuICAgIGdjY1N1cHByZXNzV2FybmluZ3M6IHtcbiAgICAgIHRpdGxlOiBcIlN1cHByZXNzIEdDQyBXYXJuaW5nc1wiLFxuICAgICAgdHlwZTogXCJib29sZWFuXCIsXG4gICAgICBkZWZhdWx0OiBmYWxzZVxuICAgIH0sXG4gICAgZ2NjRGVmYXVsdENGbGFnczoge1xuICAgICAgdGl0bGU6IFwiQyBGbGFnc1wiLFxuICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgIGRlZmF1bHQ6IFwiLVdhbGxcIlxuICAgIH0sXG4gICAgZ2NjRGVmYXVsdENwcEZsYWdzOiB7XG4gICAgICB0aXRsZTogXCJDKysgRmxhZ3NcIixcbiAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICBkZWZhdWx0OiBcIi1XYWxsIC1zdGQ9YysrMTFcIlxuICAgIH0sXG4gICAgZ2NjRXJyb3JMaW1pdDoge1xuICAgICAgdGl0bGU6IFwiR0NDIEVycm9yIExpbWl0XCIsXG4gICAgICB0eXBlOiBcImludGVnZXJcIixcbiAgICAgIGRlZmF1bHQ6IDBcbiAgICB9XG4gIH0sXG5cbiAgYWN0aXZhdGU6ICgpID0+IHtcbiAgICBpZighYXRvbS5wYWNrYWdlcy5nZXRMb2FkZWRQYWNrYWdlcyhcImxpbnRlclwiKSkge1xuICAgICAgYXRvbS5ub3RpZmljYXRpb25zLmFkZEVycm9yKFxuICAgICAgICBcIkxpbnRlciBwYWNrYWdlIG5vdCBmb3VuZC5cIixcbiAgICAgICAge1xuICAgICAgICAgIGRldGFpbDogXCJQbGVhc2UgaW5zdGFsbCB0aGUgYGxpbnRlcmAgcGFja2FnZSBpbiB5b3VyIFNldHRpbmdzIHZpZXcuXCJcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9XG4gICAgcmVxdWlyZShcImF0b20tcGFja2FnZS1kZXBzXCIpLmluc3RhbGwoXCJsaW50ZXItZ2NjXCIpO1xuICB9LFxuXG4gIHByb3ZpZGVMaW50ZXI6ICgpID0+IHtcbiAgICBjb25zdCBoZWxwZXJzID0gcmVxdWlyZShcImF0b20tbGludGVyXCIpO1xuICAgIGNvbnN0IHJlZ2V4ID0gXCIoPzxmaWxlPi4rKTooPzxsaW5lPlxcXFxkKyk6KD88Y29sPlxcXFxkKyk6XFxcXHMqXFxcXHcqXFxcXHMqKD88dHlwZT4oZXJyb3J8d2FybmluZ3xub3RlKSk6XFxcXHMqKD88bWVzc2FnZT4uKilcIjtcblxuICAgIC8vIFJlYWQgY29uZmlndXJhdGlvbiBkYXRhIGZyb20gSlNPTiBmaWxlIC5nY2MtY29uZmlnLmpzb25cbiAgICAvLyBpbiBwcm9qZWN0IHJvb3RcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogXCJHQ0NcIixcbiAgICAgIGdyYW1tYXJTY29wZXM6IFtcInNvdXJjZS5jXCIsIFwic291cmNlLmNwcFwiXSxcbiAgICAgIHNjb3BlOiBcImZpbGVcIixcbiAgICAgIGxpbnRPbkZseTogZmFsc2UsXG4gICAgICBsaW50OiAoYWN0aXZlRWRpdG9yKSA9PiB7XG4gICAgICAgIGNvbmZpZyA9IHJlcXVpcmUoXCIuL2NvbmZpZ1wiKTtcbiAgICAgICAgdmFyIHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG4gICAgICAgIHNldHRpbmdzID0gY29uZmlnLnNldHRpbmdzKCk7XG4gICAgICAgIHZhciBmaWxlID0gYWN0aXZlRWRpdG9yLmdldFBhdGgoKTtcbiAgICAgICAgdmFyIGN3ZCA9IGF0b20ucHJvamVjdC5nZXRQYXRocygpWzBdXG4gICAgICAgIGlmICghY3dkKSB7XG4gICAgICAgICAgICBlZGl0b3IgPSBhdG9tLndvcmtzcGFjZS5nZXRBY3RpdmVQYW5lSXRlbSgpO1xuICAgICAgICAgICAgaWYgKGVkaXRvcikge1xuICAgICAgICAgICAgICAgIGZpbGUgPSBlZGl0b3IuYnVmZmVyLmZpbGU7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY3dkID0gZmlsZS5nZXRQYXJlbnQoKS5nZXRQYXRoKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbW1hbmQgPSBzZXR0aW5ncy5leGVjUGF0aDtcblxuICAgICAgICAvLyBFeHBhbmQgcGF0aCBpZiBuZWNlc3NhcnlcbiAgICAgICAgaWYgKGNvbW1hbmQuc3Vic3RyaW5nKDAsMSkgPT0gXCIuXCIpIHtcbiAgICAgICAgICAgIGNvbW1hbmQgPSBwYXRoLmpvaW4oY3dkLCBjb21tYW5kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFyZ3MgPSBbXTtcbiAgICAgICAgYXJncy5wdXNoKFwiLWNcIik7XG5cbiAgICAgICAgaWYoYWN0aXZlRWRpdG9yLmdldEdyYW1tYXIoKS5uYW1lID09PSBcIkMrK1wiKSB7XG4gICAgICAgICAgcyA9IHNldHRpbmdzLmdjY0RlZmF1bHRDcHBGbGFncztcbiAgICAgICAgICB0ZW1wYXJncyA9IHMuc3BsaXQoXCIgXCIpO1xuICAgICAgICAgIGFyZ3MgPSBhcmdzLmNvbmNhdCh0ZW1wYXJncyk7XG4gICAgICAgICB9IGVsc2UgaWYoYWN0aXZlRWRpdG9yLmdldEdyYW1tYXIoKS5uYW1lID09PSBcIkNcIikge1xuICAgICAgICAgIHMgPSBzZXR0aW5ncy5nY2NEZWZhdWx0Q0ZsYWdzO1xuICAgICAgICAgIHRlbXBhcmdzID0gcy5zcGxpdChcIiBcIik7XG4gICAgICAgICAgYXJncyA9IGFyZ3MuY29uY2F0KHRlbXBhcmdzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFyZ3MucHVzaChgLWZtYXgtZXJyb3JzPSR7c2V0dGluZ3MuZ2NjRXJyb3JMaW1pdH1gKTtcbiAgICAgICAgaWYoc2V0dGluZ3MuZ2NjU3VwcHJlc3NXYXJuaW5ncykge1xuICAgICAgICAgIGFyZ3MucHVzaChcIi13XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHMgPSBzZXR0aW5ncy5nY2NJbmNsdWRlUGF0aHM7XG4gICAgICAgIHMgPSBzLnRyaW0oKTtcbiAgICAgICAgaWYgKHMubGVuZ3RoICE9ICAwKSB7XG4gICAgICAgICAgICB0ZW1wYXJncyA9IHMuc3BsaXQoXCIsXCIpO1xuICAgICAgICAgICAgdGVtcGFyZ3MuZm9yRWFjaChmdW5jdGlvbihlbnRyeSkge1xuICAgICAgICAgICAgICAgIGVudHJ5ID0gZW50cnkudHJpbSgpO1xuICAgICAgICAgICAgICAgIGlmIChlbnRyeS5sZW5ndGggIT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkuc3Vic3RyaW5nKDAsMSkgPT0gXCIuXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5ID0gcGF0aC5qb2luKGN3ZCwgZW50cnkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBcIi1JXCIgKyBlbnRyeTtcbiAgICAgICAgICAgICAgICAgICAgYXJncy5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgYXJncy5wdXNoKGZpbGUpO1xuXG4gICAgICAgIGZ1bGxfY29tbWFuZCA9IFwibGludGVyLWdjYzogXCIgKyBjb21tYW5kO1xuICAgICAgICBhcmdzLmZvckVhY2goZnVuY3Rpb24oZW50cnkpe1xuICAgICAgICAgICAgZnVsbF9jb21tYW5kID0gZnVsbF9jb21tYW5kICsgXCIgXCIgKyBlbnRyeTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc29sZS5sb2coZnVsbF9jb21tYW5kKTtcbiAgICAgICAgcmV0dXJuIGhlbHBlcnMuZXhlYyhjb21tYW5kLCBhcmdzLCB7c3RyZWFtOiBcInN0ZGVyclwifSkudGhlbihvdXRwdXQgPT5cbiAgICAgICAgICB7XG4gICAgICAgICAgICAgIG1lc3NhZ2VzID0gaGVscGVycy5wYXJzZShvdXRwdXQsIHJlZ2V4KTtcbiAgICAgICAgICAgICAgdmFyIHNlYXJjaFN0cmluZyA9IFwiZXJyb3JcIjtcbiAgICAgICAgICAgICAgdmFyIGVycm9yX3BvcyA9IG91dHB1dC5pbmRleE9mKHNlYXJjaFN0cmluZyk7XG4gICAgICAgICAgICAgIGlmIChtZXNzYWdlcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgaWYgKGVycm9yX3BvcyAhPSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImVycm9yXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IG91dHB1dC5zdWJzdHJpbmcoZXJyb3JfcG9zLCBvdXRwdXQubGVuZ3RoIC0gMSlcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZXM7XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH07XG4gIH1cbn07XG4iXX0=
//# sourceURL=/home/victor/.atom/packages/linter-gcc/lib/main.js
